<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resume Builder - Create Professional Resumes</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <!-- Add jsPDF and html2canvas -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2294968987167254"
     crossorigin="anonymous"></script>
    <style>
        @media print {
            .no-print { display: none !important; }
            .print-area { 
                width: 100% !important; 
                margin: 0 !important; 
                padding: 20px !important;
                box-shadow: none !important;
            }
            body { margin: 0; padding: 0; }
        }
        
        /* Add PDF export specific styles */
        @media print, (prefers-color-scheme: print) {
            body * {
                visibility: hidden;
            }
            #resumePreview, #resumePreview * {
                visibility: visible;
            }
            #resumePreview {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                padding: 20px;
                margin: 0;
                box-shadow: none;
            }
        }
        
        .resume-template {
            min-height: 800px;
            font-family: 'Arial', sans-serif;
        }
        
        .template-professional {
            background: white;
            border: 1px solid #e5e7eb;
        }
        
        .template-modern {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .template-creative {
            background: #f8fafc;
            border-left: 5px solid #3b82f6;
        }
        
        .template-minimal {
            background: white;
            border: none;
            font-family: 'Georgia', serif;
        }
        
        .form-section {
            max-height: 600px;
            overflow-y: auto;
        }
        
        .preview-section {
            max-height: 800px;
            overflow-y: auto;
        }
        
        .experience-item, .education-item {
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            padding: 16px;
            margin-bottom: 12px;
            background: #f9fafb;
        }
        
        .skill-tag {
            display: inline-block;
            background: #3b82f6;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            margin: 2px;
            font-size: 14px;
        }
        
        /* PDF Loading Spinner */
        #pdfLoading {
            display: none;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <!-- PDF Loading Spinner -->
    <div id="pdfLoading" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white p-6 rounded-lg shadow-xl text-center">
            <i class="fas fa-spinner fa-spin text-4xl text-blue-600 mb-3"></i>
            <p class="text-gray-800">Generating PDF...</p>
        </div>
    </div>

    <div class="container mx-auto px-4 py-8">
        <div class="text-center mb-8 no-print">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">
                <i class="fas fa-file-alt text-blue-600"></i> Resume Builder
            </h1>
            <p class="text-gray-600">Create your professional resume in minutes</p>
            
            <!-- Ad Banner Example (Top of Page) -->
            <div class="max-w-4xl mx-auto mt-4 mb-6 no-print">
                <!-- AdSense Placeholder -->
                <div class="bg-gray-200 p-4 text-center text-gray-600">
                    Advertisement Space (Google AdSense)
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Form Section -->
            <div class="no-print">
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">Resume Information</h2>
                        <div class="space-x-2">
                            <button id="saveBtn" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                                <i class="fas fa-save"></i> Save
                            </button>
                            <button id="loadBtn" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
                                <i class="fas fa-upload"></i> Load
                            </button>
                            <button id="clearBtn" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">
                                <i class="fas fa-trash"></i> Clear
                            </button>
                        </div>
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Template Style</label>
                        <select id="templateSelect" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500">
                            <option value="professional">Professional</option>
                            <option value="modern">Modern</option>
                            <option value="creative">Creative</option>
                            <option value="minimal">Minimal</option>
                        </select>
                    </div>

                    <div class="form-section space-y-6">
                        <!-- Personal Information -->
                        <div>
                            <h3 class="text-lg font-semibold text-gray-800 mb-3 flex items-center">
                                <i class="fas fa-user text-blue-600 mr-2"></i> Personal Information
                            </h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <input type="text" id="fullName" placeholder="Full Name" class="p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500">
                                <input type="text" id="jobTitle" placeholder="Job Title" class="p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500">
                                <input type="email" id="email" placeholder="Email" class="p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500">
                                <input type="tel" id="phone" placeholder="Phone" class="p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500">
                                <input type="text" id="location" placeholder="Location" class="p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 md:col-span-2">
                            </div>
                            <textarea id="professionalSummary" placeholder="Professional Summary" rows="3" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 mt-4"></textarea>
                        </div>

                        <!-- Work Experience -->
                        <div>
                            <div class="flex justify-between items-center mb-3">
                                <h3 class="text-lg font-semibold text-gray-800 flex items-center">
                                    <i class="fas fa-briefcase text-blue-600 mr-2"></i> Work Experience
                                </h3>
                                <button id="addExperience" class="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                    <i class="fas fa-plus"></i> Add
                                </button>
                            </div>
                            <div id="experienceContainer"></div>
                        </div>

                        <!-- Education -->
                        <div>
                            <div class="flex justify-between items-center mb-3">
                                <h3 class="text-lg font-semibold text-gray-800 flex items-center">
                                    <i class="fas fa-graduation-cap text-blue-600 mr-2"></i> Education
                                </h3>
                                <button id="addEducation" class="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                    <i class="fas fa-plus"></i> Add
                                </button>
                            </div>
                            <div id="educationContainer"></div>
                        </div>

                        <!-- Skills -->
                        <div>
                            <h3 class="text-lg font-semibold text-gray-800 mb-3 flex items-center">
                                <i class="fas fa-cogs text-blue-600 mr-2"></i> Skills
                            </h3>
                            <textarea id="skills" placeholder="Enter skills separated by commas (e.g., JavaScript, Python, Project Management)" rows="3" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"></textarea>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Preview Section -->
            <div class="print-area">
                <div class="bg-white rounded-lg shadow-lg overflow-hidden">
                    <div class="no-print bg-gray-50 px-6 py-3 border-b flex justify-between items-center">
                        <h2 class="text-xl font-bold text-gray-800">Live Preview</h2>
                        <button id="exportPdfBtn" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
                            <i class="fas fa-file-pdf mr-2"></i> Export PDF
                        </button>
                    </div>
                    <div id="resumePreview" class="resume-template template-professional p-8">
                        <!-- Resume content will be generated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Ad Banner Example (Bottom of Page) -->
        <div class="max-w-4xl mx-auto mt-8 no-print">
            <div class="bg-gray-200 p-4 text-center text-gray-600">
                Advertisement Space (Google AdSense)
            </div>
        </div>
    </div>

    <script>
        // Initialize jsPDF
        const { jsPDF } = window.jspdf;

        class ResumeBuilder {
            constructor() {
                this.data = {
                    fullName: '',
                    jobTitle: '',
                    email: '',
                    phone: '',
                    location: '',
                    professionalSummary: '',
                    experience: [],
                    education: [],
                    skills: ''
                };
                this.currentTemplate = 'professional';
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.loadFromStorage();
                this.addExperienceItem();
                this.addEducationItem();
                this.updatePreview();
            }

            setupEventListeners() {
                // Form inputs
                const inputs = ['fullName', 'jobTitle', 'email', 'phone', 'location', 'professionalSummary', 'skills'];
                inputs.forEach(id => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.addEventListener('input', () => {
                            this.data[id] = element.value;
                            this.updatePreview();
                            this.autoSave();
                        });
                    }
                });

                // Template selector
                document.getElementById('templateSelect').addEventListener('change', (e) => {
                    this.currentTemplate = e.target.value;
                    this.updatePreview();
                    this.autoSave();
                });

                // Buttons
                document.getElementById('addExperience').addEventListener('click', () => this.addExperienceItem());
                document.getElementById('addEducation').addEventListener('click', () => this.addEducationItem());
                document.getElementById('saveBtn').addEventListener('click', () => this.saveToStorage());
                document.getElementById('loadBtn').addEventListener('click', () => this.loadFromStorage());
                document.getElementById('clearBtn').addEventListener('click', () => this.clearData());
                document.getElementById('exportPdfBtn').addEventListener('click', () => this.exportToPDF());
            }

            // ... [Keep all your existing methods until exportToPDF] ...

            exportToPDF() {
                const loadingSpinner = document.getElementById('pdfLoading');
                loadingSpinner.classList.remove('hidden');
                
                const resumeElement = document.getElementById('resumePreview');
                
                // Temporarily hide buttons during capture
                const noPrintElements = document.querySelectorAll('.no-print');
                noPrintElements.forEach(el => el.style.display = 'none');
                
                html2canvas(resumeElement, {
                    scale: 2, // Higher quality
                    logging: false,
                    useCORS: true,
                }).then(canvas => {
                    // Restore hidden elements
                    noPrintElements.forEach(el => el.style.display = '');
                    
                    const imgData = canvas.toDataURL('image/png');
                    const pdf = new jsPDF('p', 'mm', 'a4');
                    const imgWidth = 210; // A4 width in mm
                    const imgHeight = (canvas.height * imgWidth) / canvas.width;
                    
                    pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);
                    pdf.save(`${this.data.fullName || 'resume'}.pdf`);
                    loadingSpinner.classList.add('hidden');
                }).catch(err => {
                    console.error('PDF export failed:', err);
                    loadingSpinner.classList.add('hidden');
                    this.showNotification('PDF export failed. Please try again.', 'error');
                });
            }

            // ... [Keep all remaining existing methods] ...
        }

        // Initialize the resume builder
        const resumeBuilder = new ResumeBuilder();
    </script>
</body>
</html>
